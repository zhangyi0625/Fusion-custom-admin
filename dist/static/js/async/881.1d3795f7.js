"use strict";(self.webpackChunkzc_ls_cabin=self.webpackChunkzc_ls_cabin||[]).push([["881"],{36465:function(e,l,t){t.r(l),t.d(l,{default:()=>em});var n=t(52676),s=t(18436),r=t(75271),i=t(86781),c=t(80101),o=t(22277),a=t(46697),d=t(78083),u=t(91849),h=t(59285),f=t(15925),m=t(50828),x=t(82398),g=t(88621),p=t(74429);let j=t.p+"static/image/icon-192.60037153.png";var b=t(56186),k=t(59267),v=t(88046),S=t(85838),y=t(70771),w=t(37545),Z=t(62980),F=t(83150);let E=(0,r.memo)(()=>{let{sidebar:e,theme:l,navigation:t}=(0,g.v9)(e=>e.preferences),{menus:E}=(0,g.v9)(e=>e.menuState),C=(0,g.I0)(),{pathname:z}=(0,b.TH)(),N=(0,b.s0)(),[I,q]=(0,r.useState)([]),[P,R]=(0,r.useState)(!1),[L,T]=(0,r.useState)([]),{collapsed:U,width:B}=e,{mode:H}=l;"auto"===H&&(H=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");let O="dark"===H,_=(e,l,t,n,s)=>({key:l,icon:t,children:n,label:e,type:s}),A=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(let n of e){var t;if(2!==n.menuType){if(!(null==n||null==(t=n.children)?void 0:t.length)){l.push(_(n.title,n.path,(0,F.q7)(n.icon)));continue}l.push(_(n.title,n.path,(0,F.q7)(n.icon),A(n.children)))}}return l};return(0,r.useEffect)(()=>{let e=(0,F.Xd)(z),l=(0,F.zF)(z,E);if(l&&Object.keys(l).length){let t=l.title;t&&(document.title=`${t} - \u{5728}\u{8231}\u{5149}\u{901F}\u{62A2}\u{8231}\u{7BA1}\u{7406}\u{5E73}\u{53F0}`),U||T(e)}},[z,U,E]),(0,r.useEffect)(()=>{E&&0!==E.length&&(R(!0),q(A(E,[])),R(!1))},[E]),(0,n.jsxs)(s.Z.Sider,{trigger:null,collapsedWidth:48,className:"scroll ant-menu",style:{overflowX:"hidden",zIndex:999,boxShadow:"0 2px 5px 0 rgba(0, 0, 0, 0.08)"},collapsible:!0,width:B,theme:H,collapsed:U,children:[(0,n.jsx)("div",{className:"flex justify-between items-center toolbox",children:(0,n.jsx)(k.rU,{to:"/",style:{width:"100%"},children:(0,n.jsxs)("div",{className:"h-16 flex items-center justify-center",children:[(0,n.jsx)(i.Z,{width:25,src:j,preview:!1}),!U&&(0,n.jsx)("p",{style:{fontWeight:"bold",margin:"0 12px",fontSize:"16px",color:O?"#fff":"#1890ff"},children:"在舱光速抢舱管理平台"})]})})}),(0,n.jsx)(c.Z,{wrapperClassName:"side-menu",spinning:P,tip:"加载中",children:I.length>0?(0,n.jsx)(o.Z,{mode:"inline",theme:H,defaultSelectedKeys:[z],openKeys:t.accordion?L:void 0,items:I,onClick:e=>{let{key:l}=e;N(l)},onOpenChange:e=>{if(e.length<1)return T(e);let l=e[e.length-1];if(l.includes(e[0]))return T(e);T([l])}}):(0,n.jsx)(a.Z,{description:(0,n.jsx)(n.Fragment,{children:"暂无菜单，请检查用户角色是否具有菜单！"})})}),(0,n.jsx)(d.Z,{style:{margin:"8px 0"}}),(0,n.jsx)("div",{className:"flex justify-center content-center",style:{height:U?"140px":"40px"},children:(0,n.jsxs)(u.Z,{direction:U?"vertical":"horizontal",align:"center",className:"justify-center",children:[(0,n.jsx)(h.ZP,{theme:{components:{Segmented:{itemHoverColor:O?"#eee":"rgba(0,0,0,0.88)",itemColor:O?"#fff":"rgba(0, 0, 0, 0.65)",itemSelectedBg:O?"#1677ff":"#fff",itemSelectedColor:O?"#fff":"rgba(0,0,0,0.88)",trackBg:O?"#001529":"#f5f5f5"}}},children:(0,n.jsx)(f.Z,{onChange:e=>C((0,p.ex)("theme","mode",e)),vertical:U,size:"small",options:[{label:U?"":"light",value:"light",icon:(0,n.jsx)(v.Z,{})},{label:U?"":"dark",value:"dark",icon:(0,n.jsx)(S.Z,{})}]})}),(0,n.jsx)(m.Z,{title:"帮助文档",children:(0,n.jsx)(x.ZP,{size:"small",color:"default",variant:"filled",shape:"circle",icon:(0,n.jsx)(y.Z,{style:{color:O?"white":"black"}})})}),(0,n.jsx)(x.ZP,{size:"small",color:"default",variant:"filled",shape:"circle",style:{cursor:"pointer",fontSize:"16px"},icon:U?(0,n.jsx)(w.Z,{style:{color:O?"white":"black"}}):(0,n.jsx)(Z.Z,{style:{color:O?"white":"black"}}),onClick:()=>C((0,p.ex)("sidebar","collapsed",!U)),className:"btnbor"})]})})]})});var C=t(58594),z=t(78249),N=t(14138),I=t(39257),q=t(68187);let P=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],R=(()=>{if("undefined"==typeof document)return!1;let e=P[0],l={};for(let t of P)if(t?.[1]in document){for(let[n,s]of t.entries())l[e[n]]=s;return l}return!1})(),L={change:R.fullscreenchange,error:R.fullscreenerror},T={request:(e=document.documentElement,l)=>new Promise((t,n)=>{let s=()=>{T.off("change",s),t()};T.on("change",s);let r=e[R.requestFullscreen](l);r instanceof Promise&&r.then(s).catch(n)}),exit:()=>new Promise((e,l)=>{if(!T.isFullscreen)return void e();let t=()=>{T.off("change",t),e()};T.on("change",t);let n=document[R.exitFullscreen]();n instanceof Promise&&n.then(t).catch(l)}),toggle:(e,l)=>T.isFullscreen?T.exit():T.request(e,l),onchange(e){T.on("change",e)},onerror(e){T.on("error",e)},on(e,l){let t=L[e];t&&document.addEventListener(t,l,!1)},off(e,l){let t=L[e];t&&document.removeEventListener(t,l,!1)},raw:R};Object.defineProperties(T,{isFullscreen:{get:()=>!!document[R.fullscreenElement]},element:{enumerable:!0,get:()=>document[R.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>!!document[R.fullscreenEnabled]}}),R||(T={isEnabled:!1});let U=T;var B=t(42530),H=t(25700),O=t(72971);let _=()=>{let[e,l]=(0,r.useState)(U.isFullscreen);(0,r.useEffect)(()=>{U.on("change",()=>(U.isFullscreen?l(!0):l(!1),()=>U.off("change",()=>{})))},[]);let t=()=>{U.isEnabled||O.ZP.warning("当前您的浏览器不支持全屏 ❌"),U.toggle()};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(m.Z,{title:"全屏",placement:"bottom",children:e?(0,n.jsx)(B.Z,{style:{cursor:"pointer",fontSize:"18px"},onClick:t}):(0,n.jsx)(H.Z,{style:{cursor:"pointer",fontSize:"18px"},onClick:t})})})};var A=t(14461);let M=()=>{let e=(0,b.TH)(),{menus:l}=(0,g.v9)(e=>e.menuState),[t,s]=(0,r.useState)([]),{breadcrumb:i}=(0,g.v9)(e=>e.preferences);return(0,r.useEffect)(()=>{let t=function e(l,t,s){let r=[];if(l)for(let i=0;i<l.length;i++){let c=l[i];if(t===c.path||t.includes(c.path)&&t.length>c.path.length&&"/"===t.substring(c.path.length,c.path.length+1)){let e={};e.title=(0,n.jsxs)(n.Fragment,{children:[s&&c.icon&&(0,F.q7)(c.icon),(0,n.jsx)("span",{style:{padding:"0 4px"},children:c.title})]}),e.key=c.path,t===c.path?e.title=(0,n.jsxs)(n.Fragment,{children:[s&&c.icon&&(0,F.q7)(c.icon),(0,n.jsx)(k.rU,{to:c.path,children:c.title})]}):c.component&&(e.title=(0,n.jsxs)(n.Fragment,{children:[s&&c.icon&&(0,F.q7)(c.icon),(0,n.jsxs)(k.rU,{to:t,children:[c.title,"详情"]})]})),r.push(e)}if(c.children&&c.children.length>0){let l=e(c.children,t,s);if(l.length>0)return[...r,...l]}}return r}(l,e.pathname,i.showIcon);t.length>0&&s(t)},[e.pathname,l,i]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(A.Z,{items:t,className:"flex justify-between items-center",style:{marginLeft:"10px"}})})};var X=t(73347),K=t(85108),W=t(60966),G=t(65436),Q=t(10988),Y=t(89720),$=t(60313),D=t(61758),J=t(46417),V=t(80584),ee=t(99622),el=t(16013);let{useToken:et}=X.Z,en=()=>{let e=(0,g.I0)(),{token:l}=et(),{modal:t}=K.Z.useApp(),s=(0,b.s0)(),i=[{key:"doc",label:"文档",icon:(0,n.jsx)(Y.Z,{})},{key:"1",label:"个人中心",icon:(0,n.jsx)($.Z,{}),disabled:!1,onClick:()=>{}},{key:"help",label:"问题 & 帮助",icon:(0,n.jsx)(D.Z,{})},{type:"divider"},{key:"3",label:"刷新缓存",icon:(0,n.jsx)(J.Z,{}),onClick:()=>{localStorage.clear(),window.location.reload()}},{type:"divider"},{key:"lock",label:"锁屏",icon:(0,n.jsx)(z.Z,{}),onClick:()=>{e((0,p.ex)("widget","lockScreenStatus",!0))}},{type:"divider"},{key:"4",label:"退出登录",icon:(0,n.jsx)(V.Z,{}),disabled:!1,extra:"alt + Q",onClick:()=>{t.confirm({title:"退出登录",icon:(0,n.jsx)(ee.Z,{}),content:"确认退出登录吗？",okText:"确认",onOk:()=>{let e=sessionStorage.getItem("token");(0,el.kS)(e),sessionStorage.removeItem("token"),sessionStorage.removeItem("roleId"),sessionStorage.removeItem("isLogin"),sessionStorage.removeItem("loginUser"),document.title="在舱光速抢舱管理平台 - 登录",s("/login")},cancelText:"取消"})}}],c={backgroundColor:l.colorBgElevated,borderRadius:l.borderRadiusLG,boxShadow:l.boxShadowSecondary};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(G.Z,{menu:{items:i},popupRender:e=>(0,n.jsxs)("div",{className:"dropdownContent",style:c,children:[(0,n.jsx)("div",{className:"avatar flex items-center p-3",children:(0,n.jsx)(W.Z,{size:"large",src:Q})}),(0,n.jsx)(d.Z,{style:{margin:"2px 0"}}),r.cloneElement(e,{style:{boxShadow:"none"}})]}),placement:"bottomLeft",overlayStyle:{width:240},children:(0,n.jsxs)("div",{className:"login-user flex items-center cursor-pointer justify-between h-[50] transition-all duration-300",children:[(0,n.jsx)(W.Z,{size:"default",src:Q}),(0,n.jsx)("span",{style:{margin:"0 0 0 6px"},children:sessionStorage.getItem("loginUser")||"username"})]})})})},es=r.lazy(()=>Promise.all([t.e("844"),t.e("262"),t.e("607")]).then(t.bind(t,10397))),er=(0,r.memo)(()=>{let e=(0,g.I0)(),[l,t]=(0,r.useState)(!1),{breadcrumb:i}=(0,g.v9)(e=>e.preferences),c=e=>{};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.Z.Header,{className:"ant-layout-header flex",style:{borderBottom:" 1px solid #e9edf0"},children:[i.enable&&(0,n.jsx)(M,{}),(0,n.jsxs)(u.Z,{size:"large",className:"flex flex-1 justify-end items-center toolbox",children:[(0,n.jsx)(I.Z,{variant:"filled",placeholder:"输入内容查询",suffix:(0,n.jsx)(C.Z,{style:{cursor:"pointer",fontSize:"18px"}}),onChange:e=>c(e.target.value)}),(0,n.jsx)(m.Z,{placement:"bottom",title:"锁屏",children:(0,n.jsx)(z.Z,{style:{cursor:"pointer",fontSize:"18px"},onClick:()=>{e((0,p.ex)("widget","lockScreenStatus",!0))}})}),(0,n.jsx)(m.Z,{placement:"bottomRight",title:"系统设置",children:(0,n.jsx)(N.Z,{style:{cursor:"pointer",fontSize:"18px"},onClick:()=>t(!0)})}),(0,n.jsx)(_,{}),(0,n.jsx)(en,{})]})]}),(0,n.jsx)(r.Suspense,{fallback:(0,n.jsx)(q.Z,{}),children:(0,n.jsx)(es,{open:l,setOpen:t})})]})});var ei=t(45870);let ec=(e,l)=>{for(let t of e){if(t.path===l)return t;if(t.children){let e=ec(t.children,l);if(e)return e}}return null},eo=e=>ec(ei.pd,e),ea=()=>{let e=(0,b.s0)(),l=(0,b.TH)();return(0,r.useEffect)(()=>{let t=sessionStorage.getItem("isLogin");"/"===l.pathname&&t?e(sessionStorage.getItem("homePath")||"/404"):"false"!==t&&t&&"/"!==l.pathname?eo(l.pathname)||"404"===l.pathname||l.key||e("/404"):e("/login",{replace:!0})},[]),(0,n.jsx)(b.j3,{})},ed=()=>(0,n.jsx)(s.Z.Content,{className:"flex flex-col",style:{overflowY:"auto",overflowX:"hidden",padding:"8px"},children:(0,n.jsx)(ea,{})});var eu=t(7802);let eh={"screen-lock":"screen-lock-jU27S8"},ef=()=>{let{widget:e}=(0,g.v9)(e=>e.preferences),l=(0,g.I0)(),{lockScreenStatus:t}=e,s=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(t){var e;null==(e=s.current)||e.focus()}},[t]),t?(0,n.jsx)("div",{className:eh["screen-lock"],children:(0,n.jsxs)("div",{className:"screen-lock-content",children:[(0,n.jsxs)("div",{className:"screen-lock-title",children:[(0,n.jsx)("img",{src:eu,alt:"",width:100}),(0,n.jsx)("span",{children:"系统锁屏"})]}),(0,n.jsx)("div",{className:"screen-lock-input",children:(0,n.jsx)(I.Z.Password,{ref:s,placeholder:"请输入密码",onPressEnter:e=>{l((0,p.ex)("widget","lockScreenStatus",!1))}})})]})}):null},em=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.Z,{style:{height:"100%"},children:[(0,n.jsx)(E,{}),(0,n.jsxs)(s.Z,{children:[(0,n.jsx)(er,{}),(0,n.jsx)(ed,{})]})]}),(0,n.jsx)(ef,{})]})}}]);